<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home | Practice Vault</title>
  <link rel="icon" href="/assets/favicon.ico">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Oswald:wght@400;700&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="/css/typography.css">
  <link rel="stylesheet" href="/css/core.css">
  
  <script src="/firebase/firebase-app-compat.js"></script>
  <script src="/firebase/firebase-auth-compat.js"></script>
  <script src="/firebase/firebase-firestore-compat.js"></script>
  <script src="/firebase/firebase-init.js"></script>
  
  <script>document.documentElement.dataset.protected = 'true';</script>
  <script src="/config/auth-guard.js"></script>
  
  <script src="/config/components.js"></script>
  <script src="/config/navigation.js"></script>
  <script src="/config/course-data.js"></script>
  
  <style>
    .pathway {
      background: #fff;
      border-radius: 12px;
      overflow: hidden;
      margin-bottom: 24px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    
    .pathway-header {
      cursor: pointer;
      user-select: none;
      padding: 32px 24px;
      background-size: cover;
      background-position: center;
      position: relative;
    }
    
    .pathway.collapsed .pathway-header {
      border-radius: 12px;
    }
    
    .pathway-header::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(0,0,0,0.7), rgba(0,0,0,0.5));
      border-radius: inherit;
      transition: background 0.3s ease;
    }
    
    .pathway-header:hover::before {
      background: linear-gradient(135deg, rgba(0,0,0,0.65), rgba(0,0,0,0.45));
    }
    
    .pathway-header-content {
      position: relative;
      z-index: 1;
    }
    
    .pathway-title-row {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 8px;
    }
    
    .pathway-title {
      color: #fff;
      font-size: var(--heading-subsection);
      font-weight: 700;
      margin: 0;
    }
    
    .topic-count {
      display: flex;
      align-items: center;
      gap: 6px;
      color: #06b3fd;
      background: rgba(0,0,0,0.4);
      padding: 6px 12px;
      border-radius: 6px;
      border: 1px solid rgba(6, 179, 253, 0.4);
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      white-space: nowrap;
    }
    
    .topic-count-number {
      font-size: 16px;
      font-weight: 700;
    }
    
    .pathway-desc {
      color: rgba(255,255,255,0.9);
      font-size: var(--text-ui);
      margin: 0;
      max-width: 700px;
    }
    
    .pathway-toggle {
      position: absolute;
      bottom: 16px;
      right: 16px;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.3);
      border: 1px solid rgba(255,255,255,0.2);
      color: rgba(255,255,255,0.8);
      font-size: 20px;
      transition: transform 0.3s ease;
      z-index: 1;
    }
    
    .pathway.collapsed .pathway-toggle {
      transform: rotate(-90deg);
    }
    
    .pathway.collapsed .pathway-content {
      display: none;
    }
    
    .pathway-content {
      overflow: hidden;
      transition: max-height 0.6s ease;
    }
    
    .groove-bg {
      background-image: url('/assets/groove-studies.webp');
    }
    
    .fill-bg {
      background-image: url('/assets/fill-studies.webp');
    }
    
    .stick-bg {
      background-image: url('/assets/stick-studies.webp');
    }
    
    .kick-bg {
      background-image: url('/assets/kick-studies.webp');
    }
    
    .reading-bg {
      background-image: url('/assets/reading.webp');
    }
    
    .pathway-topics {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      padding: 24px;
    }
    
    @media (max-width: 1024px) {
      .pathway-topics {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    @media (max-width: 640px) {
      .pathway-topics {
        grid-template-columns: 1fr;
        padding: 16px;
        gap: 12px;
      }
      
      .pathway-header {
        padding: 20px 16px;
      }
      
      .pathway-title {
        font-size: var(--text-section);
      }
      
      .pathway-desc {
        font-size: var(--text-small);
      }
      
      .topic-count {
        padding: 4px 8px;
        font-size: 10px;
        gap: 4px;
      }
      
      .topic-count-number {
        font-size: 14px;
      }
    }
    
    .topic-card {
      display: block;
      padding: 16px;
      background: #fff;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      text-decoration: none;
      transition: all 0.2s;
    }
    
    .topic-card:hover {
      border-color: #06b3fd;
      box-shadow: 0 2px 8px rgba(6, 179, 253, 0.1);
      transform: translateY(-2px);
    }
    
    .topic-card.locked {
      opacity: 0.6;
      cursor: not-allowed;
      pointer-events: none;
    }
    
    .topic-card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
      gap: 12px;
    }
    
    .topic-name {
      font-size: var(--text-ui);
      font-weight: 600;
      color: #1a1a2e;
      margin: 0;
      flex: 1;
    }
    
    .level-badges {
      display: flex;
      gap: 6px;
      flex-shrink: 0;
    }
    
    .level-badge {
      width: 10px;
      height: 10px;
      min-width: 10px;
      min-height: 10px;
      border-radius: 50%;
      flex-shrink: 0;
    }
    
    .level-badge.beg {
      background: #10b981;
    }
    
    .level-badge.int {
      background: #f59e0b;
    }
    
    .level-badge.adv {
      background: #ef4444;
    }
    
    .topic-lessons {
      font-size: var(--text-small);
      color: #6b7280;
      display: block;
    }
  </style>
  
</head>
<body>
  <div id="page-loader" class="page-loader">
    <div class="loading-spinner"></div>
  </div>
  
  <div class="hero">
    <div class="hero-banner" data-bg="home"></div>
    <div class="hero-content">
      <h1 class="hero-title">Practice Vault</h1>
      <div class="hero-badge">Course Pathways</div>
    </div>
  </div>
  
  <div class="container" id="pathways-container">
    <!-- Pathways will be generated by JavaScript -->
  </div>
  
  <script>
  (function(){
    'use strict';
    
    function waitForData(callback) {
      if (window.VAULT_COURSES) {
        callback();
      } else {
        setTimeout(function() { waitForData(callback); }, 50);
      }
    }
    
    waitForData(function() {
      var pathwayDefinitions = [
        { id: 'gs', name: 'Groove Studies', desc: 'Progressive groove courses designed to develop your time, coordination, and feel.', bg: 'groove-bg' },
        { id: 'fs', name: 'Fill Studies', desc: 'Master drum fills that connect your grooves. Build musical phrasing through progressive levels.', bg: 'fill-bg' },
        { id: 'ss', name: 'Stick Studies', desc: 'Level up your hands with focused courses targeting hand speed, endurance, rudiments, technique fundamentals and weak hand development.', bg: 'stick-bg' },
        { id: 'ks', name: 'Kick Studies', desc: 'A pathway for developing speed, control, and consistency in foot technique, including single and double-kick applications.', bg: 'kick-bg' },
        { id: 'rs', name: 'Rhythm Studies', desc: 'Develop your ability to read and interpret rhythmic notation with progressive courses designed to build sight-reading fluency.', bg: 'reading-bg' }
      ];
      
      var container = document.getElementById('pathways-container');
      
      pathwayDefinitions.forEach(function(pathway) {
        var topics = [];
        for (var courseId in window.VAULT_COURSES) {
          if (window.VAULT_COURSES[courseId].pathway === pathway.id) {
            topics.push({ courseId: courseId, course: window.VAULT_COURSES[courseId] });
          }
        }
        
        var topicCount = topics.length;
        var topicLabel = topicCount === 1 ? 'Topic' : 'Topics';
        
        var pathwayDiv = document.createElement('div');
        pathwayDiv.className = 'pathway';
        
        var html = '<div class="pathway-header ' + pathway.bg + '">';
        html += '<div class="pathway-header-content">';
        html += '<div class="pathway-title-row">';
        html += '<h2 class="pathway-title">' + pathway.name + '</h2>';
        html += '<div class="topic-count">';
        html += '<span class="topic-count-number">' + topicCount + '</span>';
        html += '<span>' + topicLabel + '</span>';
        html += '</div></div>';
        html += '<p class="pathway-desc">' + pathway.desc + '</p>';
        html += '</div>';
        html += '<div class="pathway-toggle">â–¼</div>';
        html += '</div>';
        
        html += '<div class="pathway-content"><div class="pathway-topics">';
        
        topics.forEach(function(t) {
          var course = t.course;
          var lessonCount = course.lessons ? course.lessons.length : 0;
          var lessonText = lessonCount > 0 ? lessonCount + ' lesson' + (lessonCount === 1 ? '' : 's') : 'Coming Soon';
          
          html += '<a href="/' + pathway.id + '?' + course.slug + '" class="topic-card">';
          html += '<div class="topic-card-header">';
          html += '<h3 class="topic-name">' + course.topic + '</h3>';
          html += '<div class="level-badges">';
          if (course.levels) {
            course.levels.forEach(function(level) {
              html += '<div class="level-badge ' + level + '" title="' + (level === 'beg' ? 'Beginner' : level === 'int' ? 'Intermediate' : 'Advanced') + '"></div>';
            });
          }
          html += '</div></div>';
          html += '<span class="topic-lessons">' + lessonText + '</span>';
          html += '</a>';
        });
        
        html += '</div></div>';
        
        pathwayDiv.innerHTML = html;
        container.appendChild(pathwayDiv);
        
        pathwayDiv.querySelector('.pathway-header').addEventListener('click', function() {
          pathwayDiv.classList.toggle('collapsed');
        });
      });
    });
  })();
  </script>

</body>
</html>
